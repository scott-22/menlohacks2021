extends layout

block content
  h1#welcome Loading...
  p#address

block endscripts 
  script(src="/javascripts/web3.min.js")
  script(src="/javascripts/initweb3.js")
  script(src="/javascripts/account.js")
  script.
    let web3, address;

    window.onload = async () => {
        web3 = await initweb3();
        address = (await web3.eth.getAccounts())[0];

        res = await requireaccount(address);
        document.getElementById("welcome").innerHTML = `Welcome, ${res.username}`;
        document.getElementById("address").innerHTML = `Your address: ${res.id}`;
    }